{"ast":null,"code":"import _regeneratorRuntime from \"/Users/admin/projects/diamonds2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/admin/projects/diamonds2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/admin/projects/diamonds2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport useInterval from \"./useInterval\";\nimport axios from \"axios\";\nexport default (function (url, delay, baseResponse) {\n  var _useState = useState(baseResponse),\n      _useState2 = _slicedToArray(_useState, 2),\n      response = _useState2[0],\n      setResponse = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isFetching = _useState4[0],\n      setIsFetching = _useState4[1];\n\n  useEffect(function () {\n    var fetch =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _ref2, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(url);\n\n              case 2:\n                _ref2 = _context.sent;\n                data = _ref2.data;\n                setResponse(data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetch() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetch();\n  }, [url]);\n  useInterval(function () {\n    var fetch =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _ref4, data;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (isFetching) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                setIsFetching(true);\n                _context2.next = 4;\n                return axios.get(url);\n\n              case 4:\n                _ref4 = _context2.sent;\n                data = _ref4.data;\n                setResponse(data);\n                setIsFetching(false);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function fetch() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    fetch();\n  }, delay);\n  return response;\n});","map":{"version":3,"sources":["/Users/admin/projects/diamonds2/frontend/src/hooks/useFetchRepeatedly.js"],"names":["useState","useEffect","useInterval","axios","url","delay","baseResponse","response","setResponse","isFetching","setIsFetching","fetch","get","data"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,gBAAe,UAACC,GAAD,EAAMC,KAAN,EAAaC,YAAb,EAA8B;AAAA,kBACXN,QAAQ,CAACM,YAAD,CADG;AAAA;AAAA,MACpCC,QADoC;AAAA,MAC1BC,WAD0B;;AAAA,mBAEPR,QAAQ,CAAC,KAAD,CAFD;AAAA;AAAA,MAEpCS,UAFoC;AAAA,MAExBC,aAFwB;;AAI3CT,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMU,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACWR,KAAK,CAACS,GAAN,CAAUR,GAAV,CADX;;AAAA;AAAA;AACJS,gBAAAA,IADI,SACJA,IADI;AAEZL,gBAAAA,WAAW,CAACK,IAAD,CAAX;;AAFY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAALF,KAAK;AAAA;AAAA;AAAA,OAAX;;AAIAA,IAAAA,KAAK;AACN,GANQ,EAMN,CAACP,GAAD,CANM,CAAT;AAQAF,EAAAA,WAAW,CAAC,YAAM;AAChB,QAAMS,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBACPF,UADO;AAAA;AAAA;AAAA;;AAEVC,gBAAAA,aAAa,CAAC,IAAD,CAAb;AAFU;AAAA,uBAGaP,KAAK,CAACS,GAAN,CAAUR,GAAV,CAHb;;AAAA;AAAA;AAGFS,gBAAAA,IAHE,SAGFA,IAHE;AAIVL,gBAAAA,WAAW,CAACK,IAAD,CAAX;AACAH,gBAAAA,aAAa,CAAC,KAAD,CAAb;;AALU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAALC,KAAK;AAAA;AAAA;AAAA,OAAX;;AAQAA,IAAAA,KAAK;AACN,GAVU,EAURN,KAVQ,CAAX;AAYA,SAAOE,QAAP;AACD,CAzBD","sourcesContent":["import { useState, useEffect } from \"react\";\nimport useInterval from \"./useInterval\";\nimport axios from \"axios\";\n\nexport default (url, delay, baseResponse) => {\n  const [response, setResponse] = useState(baseResponse);\n  const [isFetching, setIsFetching] = useState(false);\n\n  useEffect(() => {\n    const fetch = async () => {\n      const { data } = await axios.get(url);\n      setResponse(data);\n    };\n    fetch();\n  }, [url]);\n\n  useInterval(() => {\n    const fetch = async () => {\n      if (!isFetching) {\n        setIsFetching(true);\n        const { data } = await axios.get(url);\n        setResponse(data);\n        setIsFetching(false);\n      }\n    };\n    fetch();\n  }, delay);\n\n  return response;\n};\n"]},"metadata":{},"sourceType":"module"}